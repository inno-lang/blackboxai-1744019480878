<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Compare Products - Eyeonic</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
        }
        .comparison-table th {
            background-color: #f8fafc;
        }
        .feature-dot {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-right: 6px;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Header/Navigation -->
    <header class="bg-white shadow-md sticky top-0 z-50">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center space-x-2">
                <i class="fas fa-glasses text-2xl text-blue-600"></i>
                <span class="text-xl font-bold text-gray-800">Eyeonic</span>
            </div>
            <nav class="hidden md:flex space-x-8">
                <a href="index.html" class="text-gray-600 hover:text-blue-600">Home</a>
                <a href="products.html" class="text-gray-600 hover:text-blue-600">Products</a>
                <a href="compare.html" class="text-blue-600 font-medium">Compare</a>
                <a href="contact.html" class="text-gray-600 hover:text-blue-600">Contact</a>
            </nav>
            <button class="md:hidden text-gray-600">
                <i class="fas fa-bars text-xl"></i>
            </button>
        </div>
    </header>

    <!-- Comparison Section -->
    <section class="py-12">
        <div class="container mx-auto px-4">
            <h1 class="text-3xl font-bold text-center mb-8">Compare Products</h1>
            
            <div class="bg-white p-6 rounded-lg shadow-md mb-8">
                <h2 class="text-xl font-bold mb-4">Select Products to Compare</h2>
                <div class="grid md:grid-cols-2 gap-6">
                    <div>
                        <label for="product1" class="block text-sm font-medium text-gray-700 mb-2">First Product</label>
                        <select id="product1" class="w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2 border">
                            <option value="">Select a product</option>
                        </select>
                    </div>
                    <div>
                        <label for="product2" class="block text-sm font-medium text-gray-700 mb-2">Second Product</label>
                        <select id="product2" class="w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2 border">
                            <option value="">Select a product</option>
                        </select>
                    </div>
                </div>
                <div class="mt-4 flex justify-center">
                    <button id="compareBtn" class="bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
                        Compare Products
                    </button>
                </div>
            </div>

            <!-- Comparison Results -->
            <div id="comparisonResults" class="hidden">
                <div class="bg-white p-6 rounded-lg shadow-md mb-8">
                    <h2 class="text-xl font-bold mb-4">Product Comparison</h2>
                    <div class="overflow-x-auto">
                        <table class="min-w-full comparison-table">
                            <thead>
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Feature</th>
                                    <th id="product1Header" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"></th>
                                    <th id="product2Header" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"></th>
                                </tr>
                            </thead>
                            <tbody id="comparisonBody" class="bg-white divide-y divide-gray-200">
                                <!-- Comparison rows will be added here dynamically -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="grid md:grid-cols-2 gap-6">
                    <div id="product1Card" class="bg-white p-6 rounded-lg shadow-md">
                        <!-- Product 1 details will be added here -->
                    </div>
                    <div id="product2Card" class="bg-white p-6 rounded-lg shadow-md">
                        <!-- Product 2 details will be added here -->
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-12">
        <div class="container mx-auto px-4">
            <div class="grid md:grid-cols-4 gap-8">
                <div>
                    <h3 class="text-xl font-bold mb-4">Eyeonic</h3>
                    <p class="text-gray-400">Premium eyewear for every vision need.</p>
                </div>
                <div>
                    <h4 class="font-bold mb-4">Quick Links</h4>
                    <ul class="space-y-2">
                        <li><a href="index.html" class="text-gray-400 hover:text-white">Home</a></li>
                        <li><a href="products.html" class="text-gray-400 hover:text-white">Products</a></li>
                        <li><a href="compare.html" class="text-gray-400 hover:text-white">Compare</a></li>
                        <li><a href="contact.html" class="text-gray-400 hover:text-white">Contact</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold mb-4">Customer Service</h4>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-400 hover:text-white">FAQs</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white">Shipping Policy</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white">Returns & Exchanges</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold mb-4">Connect With Us</h4>
                    <div class="flex space-x-4">
                        <a href="#" class="text-gray-400 hover:text-white"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="text-gray-400 hover:text-white"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="text-gray-400 hover:text-white"><i class="fab fa-instagram"></i></a>
                    </div>
                </div>
            </div>
            <div class="border-t border-gray-700 mt-8 pt-8 text-center text-gray-400">
                <p>&copy; 2023 Eyeonic. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="assets/app.js"></script>
    <script>
        // Global variables
        let allProducts = [];
        let selectedProducts = [];

        // DOM Elements
        const product1Select = document.getElementById('product1');
        const product2Select = document.getElementById('product2');
        const compareBtn = document.getElementById('compareBtn');
        const comparisonResults = document.getElementById('comparisonResults');
        const product1Header = document.getElementById('product1Header');
        const product2Header = document.getElementById('product2Header');
        const comparisonBody = document.getElementById('comparisonBody');
        const product1Card = document.getElementById('product1Card');
        const product2Card = document.getElementById('product2Card');

        // Initialize the page
        document.addEventListener('DOMContentLoaded', () => {
            // Load product data
            fetch('data.json')
                .then(response => response.json())
                .then(data => {
                    allProducts = data.products;
                    populateProductSelects();
                })
                .catch(error => {
                    console.error('Error loading products:', error);
                });

            // Set up event listeners
            product1Select.addEventListener('change', updateSecondProductOptions);
            compareBtn.addEventListener('click', compareSelectedProducts);
        });

        // Populate product dropdowns
        function populateProductSelects() {
            allProducts.forEach(product => {
                const option1 = document.createElement('option');
                option1.value = product.id;
                option1.textContent = `${product.brand} ${product.name}`;
                product1Select.appendChild(option1);

                const option2 = document.createElement('option');
                option2.value = product.id;
                option2.textContent = `${product.brand} ${product.name}`;
                product2Select.appendChild(option2);
            });
        }

        // Update second product options based on first selection
        function updateSecondProductOptions() {
            const selectedId = product1Select.value;
            
            // Reset second select
            product2Select.innerHTML = '<option value="">Select a product</option>';
            
            // Add all products except the one selected in first dropdown
            allProducts.forEach(product => {
                if (product.id.toString() !== selectedId) {
                    const option = document.createElement('option');
                    option.value = product.id;
                    option.textContent = `${product.brand} ${product.name}`;
                    product2Select.appendChild(option);
                }
            });
        }

        // Compare selected products
        function compareSelectedProducts() {
            const product1Id = product1Select.value;
            const product2Id = product2Select.value;

            if (!product1Id || !product2Id) {
                alert('Please select two products to compare');
                return;
            }

            selectedProducts = [
                allProducts.find(p => p.id.toString() === product1Id),
                allProducts.find(p => p.id.toString() === product2Id)
            ];

            displayComparisonResults();
        }

        // Display comparison results
        function displayComparisonResults() {
            // Show comparison section
            comparisonResults.classList.remove('hidden');

            // Set product headers
            product1Header.textContent = `${selectedProducts[0].brand} ${selectedProducts[0].name}`;
            product2Header.textContent = `${selectedProducts[1].brand} ${selectedProducts[1].name}`;

            // Clear previous comparison
            comparisonBody.innerHTML = '';
            product1Card.innerHTML = '';
            product2Card.innerHTML = '';

            // Create comparison rows
            const features = new Set([
                ...selectedProducts[0].features,
                ...selectedProducts[1].features
            ]);

            features.forEach(feature => {
                const row = document.createElement('tr');
                
                // Feature name
                const featureCell = document.createElement('td');
                featureCell.className = 'px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900';
                featureCell.textContent = feature;
                row.appendChild(featureCell);

                // Product 1 feature
                const product1Cell = document.createElement('td');
                product1Cell.className = 'px-6 py-4 whitespace-nowrap text-sm text-gray-500';
                if (selectedProducts[0].features.includes(feature)) {
                    product1Cell.innerHTML = '<span class="feature-dot bg-green-500"></span>Yes';
                } else {
                    product1Cell.innerHTML = '<span class="feature-dot bg-red-500"></span>No';
                }
                row.appendChild(product1Cell);

                // Product 2 feature
                const product2Cell = document.createElement('td');
                product2Cell.className = 'px-6 py-4 whitespace-nowrap text-sm text-gray-500';
                if (selectedProducts[1].features.includes(feature)) {
                    product2Cell.innerHTML = '<span class="feature-dot bg-green-500"></span>Yes';
                } else {
                    product2Cell.innerHTML = '<span class="feature-dot bg-red-500"></span>No';
                }
                row.appendChild(product2Cell);

                comparisonBody.appendChild(row);
            });

            // Add price comparison row
            const priceRow = document.createElement('tr');
            priceRow.innerHTML = `
                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">Price</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">$${selectedProducts[0].price.toFixed(2)}</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">$${selectedProducts[1].price.toFixed(2)}</td>
            `;
            comparisonBody.appendChild(priceRow);

            // Create product cards
            createProductCard(selectedProducts[0], product1Card);
            createProductCard(selectedProducts[1], product2Card);

            // Scroll to results
            comparisonResults.scrollIntoView({ behavior: 'smooth' });
        }

        // Create product card
        function createProductCard(product, container) {
            container.innerHTML = `
                <div class="text-center mb-4">
                    <img src="${product.image}" alt="${product.name}" class="w-full h-48 object-contain mx-auto">
                </div>
                <h3 class="text-xl font-bold text-center mb-2">${product.brand} ${product.name}</h3>
                <p class="text-blue-600 font-bold text-center mb-4">$${product.price.toFixed(2)}</p>
                <p class="text-gray-600 mb-4">${product.summary}</p>
                <div class="space-y-2">
                    <h4 class="font-bold text-gray-800">Key Features:</h4>
                    <ul class="list-disc list-inside">
                        ${product.features.map(feature => `<li>${feature}</li>`).join('')}
                    </ul>
                </div>
                <div class="mt-4">
                    <a href="${product.specs_url}" class="inline-block bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700">
                        <i class="fas fa-download mr-2"></i>Download Full Specs
                    </a>
                </div>
            `;
        }
    </script>
</body>
</html>